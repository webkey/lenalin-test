// Селект, который будет кастомизироваться, необходимо скрыть, пока на нем не отработает скрипт
.form-select {
	html:not(.no-js) & {
		opacity: 0;
		height: 4rem;
	}
}

// Theme CUSTOM
// ====================================================
.select2-container {
	$select-arrow-width: $form-def-height;

	// SINGLE & MULTIPLE
	// ====================================================
	// .select2-selection - это "поле выбора" селекта
	.select2-selection {
		// Визуальные стили поля выбора, кроме стилей текста
		display: block;
		position: relative;
		height: $form-def-height;
		width: 100%;
		padding: 0.9rem 1.2rem;
		margin: 0;
		background-color: $form-def-bg-color;
		box-shadow: none;
		border-radius: 0;
		border: 0.1rem solid $form-def-border-color;
		// Текстовые стили одинаковые для single и multiple
		// Если будут отличаться, то задать раздельно ниже
		font-family: inherit;
		font-size: 1.2rem;
		line-height: 2rem;
		color: $form-def-text-color;
		transition: color $animation-speed, border $animation-speed;

		// ------ mob -----------------------------------------
		// Set style for mobile

		// .select2-selection__rendered лежит внутри .select2-selection
		// Служит для обрезания текста и добавления троеточия
		// Непосредственно в этом элементе лежит текст текущего опшина
		.select2-selection__rendered {
			display: block;
			padding: 0;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
			font-size: inherit;
			line-height: inherit;
		}

		// Placeholder
		.select2-selection__placeholder {
			color: $form-def-placeholder-color;
		}

		// Clear button
		.select2-selection__clear {
			cursor: pointer;
			float: right;
			font-weight: normal;
		}
	}

	// Arrow
	// ----------------------------------------------------
	.select2-selection__arrow {
		position: absolute;
		right: 0;
		top: 0;
		bottom: 0;
		width: $select-arrow-width;
		height: auto;
		background: none;
		z-index: 5;

		// ------ mob -----------------------------------------
		// Set style for mobile

		b {
			border: none;
			left: 0;
			top: 0;
			height: 100%;
			width: 100%;
			margin: 0;

			&::before,
			&::after {
				content: "";
				position: absolute;
				top: 50%;
				width: 8px;
				height: 2px;
				background-color: $text-color;
				margin-top: -1px;
				z-index: 1;
			}

			&::before {
				transform: rotate(45deg);
				right: 18px;
			}

			&::after {
				transform: rotate(-45deg);
				right: 13px;
			}
		}
	}

	// SEARCH
	// ====================================================
	// Контейнер поля ввода автокомплита
	.select2-search--dropdown {
		padding: 0.5rem;

		// Поле ввода <input>
		.select2-search__field {
			padding: 0.5rem;
			border: 0.1rem solid $form-def-border-color;

			&:focus {
				border-color: $form-def-border-color--focus;
			}
		}
	}

	// MULTIPLE
	// ====================================================
	.select2-selection--multiple {
		height: auto;
		min-height: $form-def-height;
		// Внутренние отступы поля выбора отличаются от single-селекта
		// По вертикали отступы должны быть меньше на расстояние между
		// активными опшинами мультиселекта + размер их бордера
		padding: 0.5rem 0.8rem;
		cursor: text;

		// ------ mob -----------------------------------------
		// Set style for mobile

		.select2-selection__rendered {
			list-style: none;
			margin: 0;
			padding: 0;
			width: 100%;

			li {
				list-style: none;
			}
		}

		.select2-selection__placeholder {
			float: left;
			margin: 0.3rem 0;
		}

		// Clear button
		.select2-selection__clear {
			cursor: pointer;
			float: right;
			font-weight: normal;
			margin-top: 0.3rem;
		}

		// Активные опшины
		.select2-selection__choice {
			float: left;
			padding: 0 0.5rem;
			background-color: #e4e4e4;
			border: 1px solid $form-def-border-color;
			border-radius: 0;
			cursor: default;
			overflow: hidden;
			white-space: nowrap;
			text-overflow: ellipsis;
			max-width: 24rem;

			// ------ mob -----------------------------------------
			// Set style for mobile
		}

		.select2-selection__choice,
		.select2-search--inline {
			margin: 0.3rem 0.4rem 0.3rem 0;
		}

		// SEARCH for MULTIPLE
		// ====================================================
		.select2-search--inline {
			float: left;
			border: solid transparent;
			border-width: 1px 0;

			// Это input лежащий внутри поля выбора multiple-селекта.
			// При фокусе на поле выбора, курсор попадает в этот input,
			// и служит полем ввода для автокомплита.
			// В single-селекте аналогичное поле автокомплита
			// находится вверху выпадающего меню опшинов.
			.select2-search__field {
				display: block;
				margin-top: 0;
				font-family: inherit;
				font-size: inherit;
				line-height: inherit;
				padding: 0;
				background: transparent;
				border: none;
				outline: 0;
				box-shadow: none;
				-webkit-appearance: textfield;
				transition: border $animation-speed;

				@include input-placeholder {
					color: $form-def-placeholder-color;
					transition: $animation-speed opacity;
				}
			}
		}

		// Крестик для удаления активного опшина
		.select2-selection__choice__remove {
			display: inline-block;
			cursor: pointer;
			margin-right: 2px;
			color: #999;
			font-weight: normal; // Перебить стили

			&:hover {
				color: #333;
			}
		}

		// Disabled
		&.select2-container--disabled {
			.select2-selection__choice__remove,
			.select2-selection__clear {
				display: none;
			}
		}
	}

	// STATES
	// ====================================================
	// Hover
	.select2-selection:hover {
		border-color: $form-def-border-color--focus;
	}

	// Focus
	&.select2-container--focus,
	&.select2-container--open {
		.select2-selection {
			border-color: $form-def-border-color--focus;
		}
	}

	// Disabled
	&.select2-container--disabled {
		.select2-selection__choice {
			pointer-events: none;

			@include forms-disabled;
		}

		.select2-selection {
			@include forms-disabled;
		}

		// Arrow disabled
		.select2-selection__arrow {
			b {
				&::before,
				&::after {
					background-color: $form-text-color--disabled;
				}
			}
		}
	}

	// DROPDOWN
	// ====================================================
	// Общие стили для выпадающего списка селекта
	.select2-dropdown {
		overflow: hidden; // Если есть закругления, то нужно обрезать внутренние элементы
		border: 0.1rem solid $form-def-border-color--focus;
		border-radius: 0;
		background-color: $form-def-bg-color;
		z-index: 5; // Поднять выше стрелок соседних селектов

		// ------ mob -----------------------------------------
		// Set style for mobile
	}

	&.select2-container--open {
		// Специальные стили для выпадающего меню
		// при открытии ВЫШЕ поля выбора
		&.select2-container--above {
			.select2-selection {
				border-top-left-radius: 0;
				border-top-right-radius: 0;
			}
		}

		// Специальные стили для выпадающего меню
		// при открытии НИЖЕ поля выбора
		&.select2-container--below {
			.select2-selection {
				border-bottom-left-radius: 0;
				border-bottom-right-radius: 0;
			}
		}

		// Arrow active
		.select2-selection__arrow {
			b {
				&::before {
					transform: rotate(-45deg);
				}

				&::after {
					transform: rotate(45deg);
				}
			}
		}

		// Специальные стили для выпадающего меню
		// при открытии ВЫШЕ поля выбора
		.select2-dropdown--above {
			border-bottom: none;
			border-bottom-left-radius: 0;
			border-bottom-right-radius: 0;
		}

		// Специальные стили для выпадающего меню
		// при открытии НИЖЕ поля выбора
		.select2-dropdown--below {
			border-top: none;
			border-top-left-radius: 0;
			border-top-right-radius: 0;
		}
	}

	// RESULTS
	// ====================================================
	// Контейнер опшинов в выпадающем меню,
	// или результатов автокоплита
	.select2-results {
		// Непосредственно список <ul> опшинов
		& > .select2-results__options {
			max-height: 20rem;
			overflow-y: auto;
			font-family: inherit;
			font-size: 1.2rem;
			line-height: 2rem;
			color: $form-def-text-color;

			// ------ mob -----------------------------------------
			// Set style for mobile
		}
	}

	// Опшин
	.select2-results__option {
		padding: 0.5rem 0.8rem;

		// ------ mob -----------------------------------------
		// Set style for mobile

		&[role=group] {
			padding: 0;
		}

		// Disabled
		&[aria-disabled=true] {
			background-color: $form-bg-color--disabled;
			color: $form-text-color--disabled;
		}

		// Active
		&[aria-selected=true] {
			background-color: #ddd;
		}

		.select2-results__option {
			// Группы опшинов
			// См. src/libs/select2/src/scss/theme/default/layout.scss
		}
	}

	// Hover
	.select2-results__option--highlighted[aria-selected] {
		background-color: $highlight-color--hover;
		color: white;
	}

	// Group options
	.select2-results__group {
		cursor: default;
		display: block;
		padding: 0.5rem;
	}
}
